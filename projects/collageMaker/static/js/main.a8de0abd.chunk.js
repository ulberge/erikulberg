(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{179:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(7),r=a.n(i),s=(a(74),a(8)),o=a(9),l=a(12),d=a(10),p=a(11),u=(a(75),a(4)),h=a.n(u),g=a(37),v=a.n(g),f=a(38),m=a.n(f),y=a(67),P=a.n(y),b=a(65),w=a.n(b),x=a(66),E=a.n(x),S=a(68),O=a.n(S),D=a(36),j=a.n(D),C=a(29),k=a.n(C),U=(a(45),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).onLoad=function(e){var t=a.props.onLoad,n=a.p.createImg(e).hide(),c=a.p.createGraphics(n.elt.naturalWidth,n.elt.naturalHeight);c.image(n,0,0,n.elt.naturalWidth,n.elt.naturalHeight),c.loadPixels(),t(c)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=r.a.findDOMNode(this);new k.a(function(t){e.p=t},t)}},{key:"render",value:function(){var e=this,t=this.props.defaultImage;return c.a.createElement("div",{className:"upload",style:{width:"100%",opacity:1}},c.a.createElement("img",{className:"loadedImage",style:{display:"block"},src:t,alt:"Load an image",onLoad:function(t){return e.onLoad(t.target.src)}}))}}]),t}(c.a.PureComponent)),I=a(17),R=a(24),M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).queueUpdate=function(e){a.updateDelayed=function(){return a.updatePieces(e)}},a.onMouseDown=function(e){null===e.target&&a.addTriangleAt(e.pointer)},a.doQueue=function(){a.updateDelayed&&a.updateDelayed()},a.cancelUpdate=function(){a.updateDelayed=!1},a.updatePieces=function(e){a.cancelUpdate();var t=a.props.onUpdatePieces,n=[];a.triangles&&(n=a.triangles.map(function(t){var n=t._collage_id,c=t.left,i=t.top,r=t.angle,s=t.oCoords,o=t._dirty,l=t._selected,d=s.mt,p=s.bl,u=s.br,h=[{x:d.x/a.scale,y:d.y/a.scale},{x:p.x/a.scale,y:p.y/a.scale},{x:u.x/a.scale,y:u.y/a.scale}],g=t.getBoundingRect(),v={left:g.left/a.scale,top:g.top/a.scale,width:g.width/a.scale,height:g.height/a.scale},f=!1,m=o;return e&&e.target===t?(f=!0,m=!0):f=l,{selected:f,id:n,x:c/a.scale,y:i/a.scale,r:r,coords:h,bounds:v,dirty:m}})),t(n)},a.renderPieces=function(){var e=a.props.pieces;a.triangles=e.map(function(e){return a.createTriangle(e)}),a.triangles.forEach(function(e){return a.canvas.add(e)});for(var t=0;t<e.length;t+=1)e[t].selected&&a.canvas.setActiveObject(a.triangles[t]);a.renderOverlaps()},a.renderOverlaps=function(){var e=a.props,t=e.pieces,n=e.placedPiecesData,c=e.scale;t.forEach(function(e){var t=e.id,i=e.r,r=e.coords;if(n[t]){var s=n[t].overlaps;s&&Object.keys(s).forEach(function(e){var t=s[e],n=r[0],o=[];t.forEach(function(e){var t=e.dist,r=e.angle,s=i/180*Math.PI+r,l=Math.cos(s)*t*c*a.scale,d=Math.sin(s)*t*c*a.scale;o.push({x:l+n.x*a.scale,y:d+n.y*a.scale})});var l=1/0,d=1/0;o.forEach(function(e){e.x<l&&(l=e.x),e.y<d&&(d=e.y)});var p=new R.fabric.Polygon(o,{left:l,top:d,stroke:"rgba(0,0,0,0.9)",strokeWidth:0,fill:"rgba(255,0,0,0.2)",selectable:!1,objectCaching:!1});a.canvas.add(p),a.canvas.sendToBack(p)})}})},a.addTriangleAt=function(e){var t={id:a.nextID(),x:e.x/a.scale,y:e.y/a.scale,r:0},n=a.createTriangle(t);a.addTriangle(n)},a.createTriangle=function(e){var t=a.props.scale,n=e.x,c=e.y,i=e.r,r=new R.fabric.Triangle({width:t*a.scale,height:t*(Math.sqrt(3)/6+Math.sqrt(3)/3)*a.scale,left:n*a.scale,top:c*a.scale,originY:"center",originX:"center",stroke:"rgba(0,0,0,0.9)",strokeWidth:.5,fill:"rgba(255,255,255,0.2)",transparentCorners:!1,padding:0,cornerSize:15,cornerColor:"rgba(255,0,200,0.7)",borderColor:"rgba(255,0,200,0.5)"});return r.setControlVisible("bl",!1),r.setControlVisible("br",!1),r.setControlVisible("mb",!1),r.setControlVisible("ml",!1),r.setControlVisible("mr",!1),r.setControlVisible("mt",!1),r.setControlVisible("tl",!1),r.setControlVisible("tr",!1),r._collage_id=e.id,r.rotate(i),r},a.addTriangle=function(e){var t=a.props.addPiece;e&&(e._dirty=!0,e._selected=!0,a.triangles.push(e),a.canvas.add(e),a.updatePieces(),t(e._collage_id))},a.nextID=function(){var e=parseInt(localStorage.getItem("pieceID"));return e||(e=0),localStorage.setItem("pieceID",e+1),e},a.onWindowResize=function(){var e=r.a.findDOMNode(Object(I.a)(Object(I.a)(a))).parentNode.parentElement;a.w=e.clientWidth,a.scale=a.w,a.canvas.clear(),a.canvas.setWidth(a.w),a.canvas.setHeight(a.w*a.ratio),a.renderPieces()},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=r.a.findDOMNode(this),t=e.parentNode.parentElement;this.w=t.clientWidth,this.h=t.clientHeight,this.ratio=this.h/this.w,this.scale=this.w,e.width=this.w,e.height=this.h,this.canvas=new R.fabric.Canvas(e),this.canvas.on({"object:moving":this.cancelUpdate,"object:rotating":this.cancelUpdate,"object:moved":this.updatePieces,"object:rotated":this.updatePieces,"selection:created":this.queueUpdate,"selection:updated":this.queueUpdate,"mouse:up":this.doQueue,"mouse:down":this.onMouseDown}),this.canvas.selection=!1,window.addEventListener("resize",this.onWindowResize,!1),this.renderPieces()}},{key:"componentDidUpdate",value:function(){this.canvas.clear(),this.renderPieces()}},{key:"render",value:function(){return c.a.createElement("canvas",{width:"300",height:"300"})}}]),t}(c.a.PureComponent),L=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.pieces,n=e.onUpdatePieces,i=e.onUpdateSrc,r=e.onUpdateSelected,s=e.selectionScale,o=e.onScaleChange,l=e.addPiece,d=e.placedPiecesData;return c.a.createElement(h.a,{container:!0,spacing:24},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement(U,{onLoad:i,defaultImage:"imgs/wood2_s.png"}),!!t&&c.a.createElement("div",{style:{position:"absolute",top:0,width:"100%"},id:"selection"},c.a.createElement(M,{scale:s,pieces:a,onUpdatePieces:n,onUpdateSelected:r,addPiece:l,placedPiecesData:d})),c.a.createElement("div",{style:{marginTop:"22px"}},c.a.createElement(j.a,{value:s,"aria-labelledby":"selectionScale",min:.1,max:1,onChange:function(e,t){return o(t)}})))))}}]),t}(c.a.PureComponent),_=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).setup=function(e){e.createCanvas(100,100),e.noLoop()},a.draw=function(e){var t=a.props,n=t.piece,c=t.src,i=t.onPieceReady,r=e.createGraphics(c.width,c.height);r.background(255,255,255,0),r.fill(255,255,255,255),r.noStroke(),r.beginShape(),n.coords.forEach(function(e){r.vertex(e.x*c.width,e.y*c.width)}),r.endShape(r.CLOSE);var s=e.createGraphics(c.width,c.height);s.image(c,0,0);var o=s.get();o.mask(r),r.remove();var l=n.coords[0].x-n.coords[1].x,d=n.coords[0].y-n.coords[1].y,p=Math.sqrt(l*l*c.width*c.width+d*d*c.width*c.width);e.width!==p&&e.resizeCanvas(p,p*(Math.sqrt(3)/6+Math.sqrt(3)/3)),e.push();var u=0,h=0;n.coords.forEach(function(e){u+=e.x*c.width,h+=e.y*c.width}),u/=3,h/=3,e.translate(p/2,p*(Math.sqrt(3)/3)),e.rotate(-n.r/180*Math.PI),e.image(o,-u,-h),e.pop(),i(n.id,e.canvas.toDataURL())},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.src){var t=r.a.findDOMNode(this);this.sketch=new k.a(function(t){e.p=t,t.setup=function(){return e.setup(t)},t.draw=function(){return e.draw(t)}},t)}}},{key:"componentDidUpdate",value:function(){var e=this.props.piece;this.p&&e.dirty&&this.draw(this.p)}},{key:"render",value:function(){return c.a.createElement("div",{className:"palette-item"})}}]),t}(c.a.PureComponent),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).getDisplayEls=function(){var e=a.props,t=e.pieces,n=e.processedPieces,i=e.placedPieces,r=e.togglePiece,s=t.slice();return s.reverse(),s.map(function(e){if(!n||!n[e.id]||!n[e.id].dataURL)return null;var t=i.includes(e.id),a={width:"100%",boxShadow:"none",padding:"2px"};return e.selected&&(a.border="1px solid rgba(0,0,0,0.75)"),t&&(a.boxShadow="1px 1px 11px -4px rgba(0,0,0,0.75)"),c.a.createElement(h.a,{key:"display"+e.id,item:!0,xs:4},c.a.createElement("img",{onClick:function(){return r(e.id)},style:a,src:n[e.id].dataURL,alt:"piece"}))})},a.getProcessEls=function(){var e=a.props,t=e.pieces,n=e.src,i=e.onPieceReady,r=e.selectionScale;return t.map(function(e){return c.a.createElement(h.a,{key:"process"+e.id,item:!0,xs:4},c.a.createElement(_,{piece:e,src:n,onPieceReady:i,selectionScale:r}))})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement(h.a,{container:!0,spacing:16},this.getDisplayEls(),c.a.createElement("div",{style:{position:"absolute",left:"-10000px"}},this.getProcessEls()))}}]),t}(c.a.PureComponent),T=a(64),W=a.n(T),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).checkOverlap=function(e){e.target.setCoords(),e.target.overlaps={};var t=a.getCoords(e.target);a.canvas.forEachObject(function(n){if(n!==e.target){var c=a.getCoords(n),i=a.triangle2triangleIntersection(t,c,n.angle);console.log(i),i?n.overlaps[e.target._collage_id]=i:void 0!==n.overlaps[e.target._collage_id]&&delete n.overlaps[e.target._collage_id]}})},a.getCoords=function(e){var t=e.oCoords,a=t.mt,n=t.bl,c=t.br;return[{x:a.x,y:a.y},{x:n.x,y:n.y},{x:c.x,y:c.y}]},a.renderPieces=function(e){var t=a.props,n=t.pieces,c=t.processedPieces,i=t.placedPieces,r=t.scale;a.triangles=[];var s=0;n.forEach(function(t,n){var o=t.id;if(c[o]&&i.includes(o)){var l,d=c[o].dataURL;a.placedPiecesData[o]?l=a.placedPiecesData[o]:(l={x:5*r+.01*s,y:4*r+.002*s,r:0,overlaps:{}},s++);var p=l,u=p.x,h=p.y,g=p.r,v=p.overlaps;a.createTriangle(o,u,h,g,v,d,function(n){a.currentRenderIndex===e&&(a.canvas.add(n),a.triangles.push(n),t.selected&&a.canvas.setActiveObject(n))})}})},a.queueUpdate=function(e){a.updateDelayed=function(){return a.updatePieces(e)}},a.doQueue=function(){a.updateDelayed&&a.updateDelayed()},a.cancelUpdate=function(){a.updateDelayed=!1},a.updatePieces=function(e){a.cancelUpdate(),a.checkOverlap(e);var t=a.props,n=t.onPiecePlacedUpdate,c=t.onSelectPiece,i={};a.triangles&&a.triangles.forEach(function(t){var n=t._collage_id,r=t.left,s=t.top,o=t.angle,l=t.overlaps;i[n]={x:r/a.scale,y:s/a.scale,r:o,overlaps:l},e&&e.target===t&&c(n)}),a.placedPiecesData=i,n(i)},a.createTriangle=function(e,t,n,c,i,r,s){var o=a.props.scale;R.fabric.Image.fromURL(r,function(r){r.scale(a.scale*o/20).set({left:t*a.scale,top:n*a.scale,originY:"center",originX:"center",transparentCorners:!1,padding:0,cornerSize:15,cornerColor:"rgba(0,0,0,0.7)",borderColor:"rgba(0,0,0,0.5)"}),r.setControlVisible("bl",!1),r.setControlVisible("br",!1),r.setControlVisible("mb",!1),r.setControlVisible("ml",!1),r.setControlVisible("mr",!1),r.setControlVisible("mt",!1),r.setControlVisible("tl",!1),r.setControlVisible("tr",!1),r._collage_id=e,r.overlaps=i,r.rotate(c),s(r)})},a.triangle2triangleIntersection=function(e,t,n){for(var c=[],i=0;i<3;i+=1)for(var r=e[i],s=e[(i+1)%3],o=0;o<3;o+=1){var l=t[o],d=t[(o+1)%3],p=a.line2lineIntersection(r,s,l,d);p&&c.push(p)}var u,h=[];if(0===c.length)return!1;6===c.length?u=[c[0],c[1],c[2],c[3],c[4],c[5]]:4===c.length?u=[c[0],c[1],c[2],c[3]]:2===c.length&&(e.forEach(function(e){a.pointInTriangle(e,t)&&h.push(e)}),t.forEach(function(t){a.pointInTriangle(t,e)&&h.push(t)}),1===h.length?u=c.concat(h):2===h.length&&(u=[c[0],h[0],c[1],h[1]]));var g=t[0],v=a.distBetweenPoints(t[0],t[1]),f=[];return u.forEach(function(e){f.push(a.getPolar(e,g,n,v))}),console.log("newShapePolar",f),f.sort(function(e,t){return a.round(e.angle,9)===a.round(t.angle,9)?1===a.round(e.angle,0)?e.dist-t.dist:t.dist-e.dist:e.angle-t.angle}),console.log("newShapePolar",f),f},a.getPolar=function(e,t,n,c){return{dist:a.distBetweenPoints(e,t)/c,angle:-Math.PI*(n/180)+a.angleBetweenPoints(e,t)}},a.round=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},a.line2lineIntersection=function(e,t,a,n){var c=(n.x-a.x)*(e.y-a.y)-(n.y-a.y)*(e.x-a.x),i=(t.x-e.x)*(e.y-a.y)-(t.y-e.y)*(e.x-a.x),r=(n.y-a.y)*(t.x-e.x)-(n.x-a.x)*(t.y-e.y);return 0===c&&0===i&&0===r?null:0===r?null:(i/=r,(c/=r)>=0&&c<=1&&i>=0&&i<=1?{x:e.x+c*(t.x-e.x),y:e.y+c*(t.y-e.y)}:null)},a.pointInTriangle=function(e,t){var a=e.x,n=e.y,c=t[0],i=t[1],r=t[2],s=r.x-c.x,o=r.y-c.y,l=i.x-c.x,d=i.y-c.y,p=a-c.x,u=n-c.y,h=s*s+o*o,g=s*l+o*d,v=s*p+o*u,f=l*l+d*d,m=l*p+d*u,y=h*f-g*g,P=0===y?0:1/y,b=(f*v-g*m)*P,w=(h*m-g*v)*P;return b>=0&&w>=0&&b+w<1},a.distBetweenPoints=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},a.angleBetweenPoints=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)},a.onWindowResize=function(){var e=r.a.findDOMNode(Object(I.a)(Object(I.a)(a))).parentNode.parentElement;a.w=e.clientWidth,a.scale=a.w,a.canvas.clear(),a.canvas.setWidth(a.w),a.canvas.setHeight(a.w*a.ratio),void 0===a.currentRenderIndex&&(a.currentRenderIndex=-1),a.currentRenderIndex+=1,a.renderPieces(a.currentRenderIndex)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=r.a.findDOMNode(this),t=this.props.savedPiecesData;this.placedPiecesData={},t&&(this.placedPiecesData=t),this.order=[];var a=e.parentNode.parentElement;this.w=a.clientWidth,this.h=a.clientHeight,this.ratio=this.h/this.w,this.scale=this.w,e.width=this.w,e.height=this.h,this.canvas=new R.fabric.Canvas(e),this.canvas.on({"object:moving":this.cancelUpdate,"object:rotating":this.cancelUpdate,"object:moved":this.updatePieces,"object:rotated":this.updatePieces,"selection:updated":this.queueUpdate,"selection:created":this.queueUpdate,"mouse:up":this.doQueue}),this.canvas.selection=!1,window.addEventListener("resize",this.onWindowResize,!1),this.renderPieces()}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.props,n=a.pieces,c=a.placedPieces,i=a.processedPieces;a.scale;return!e||!t||(c.length!==e.placedPieces.length||(n.forEach(function(t,a){var n=t.id,c=t.selected;return i[n].dataURL!==e.processedPieces[n].dataURL||(c!==e.pieces[a].selected||void 0)}),e.scale,!0))}},{key:"componentDidUpdate",value:function(){this.canvas.clear(),void 0===this.currentRenderIndex&&(this.currentRenderIndex=-1),this.currentRenderIndex+=1,this.renderPieces(this.currentRenderIndex)}},{key:"render",value:function(){var e="grayscale(100%) brightness(1.05) contrast(125%)";return this.props.isRender&&(e="none"),c.a.createElement("canvas",{width:"300",height:"300",style:{filter:e}})}}]),t}(c.a.Component),q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={target:null,isRender:!1},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.target,n=t.isRender,i=this.props,r=i.pieces,s=i.processedPieces,o=i.placedPieces,l=i.onPiecePlacedUpdate,d=i.onSelectPiece,p=i.scale,u=i.updatePieceScale,g=i.savedPiecesData,v={};return n&&(v={visibility:"hidden"}),c.a.createElement(h.a,{container:!0,spacing:24},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("div",{style:v},c.a.createElement(U,{onLoad:function(t){return e.setState({target:t})},defaultImage:"imgs/sketch1.png"})),!!a&&c.a.createElement("div",{id:"render",style:{position:"absolute",top:0,width:"100%"}},c.a.createElement(V,{pieces:r,processedPieces:s,placedPieces:o,onPiecePlacedUpdate:l,onSelectPiece:d,savedPiecesData:g,scale:p,isRender:n}))),c.a.createElement("div",{style:{padding:"22px"}},c.a.createElement(h.a,{container:!0,spacing:8},c.a.createElement(h.a,{item:!0,xs:2},c.a.createElement(W.a,{checked:n,onChange:function(){return e.setState({isRender:!n})},value:"isRender",color:"primary"})),c.a.createElement(h.a,{item:!0,xs:10},c.a.createElement("div",{style:{marginTop:"22px",width:"100%"}},c.a.createElement(j.a,{value:p,"aria-labelledby":"scale",min:.003,max:.05,onChange:function(e,t){return u(t)}})))))))}}]),t}(c.a.PureComponent);window.PIECE_ID=0;var A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={src:null,pieces:[],processedPieces:{},placedPieces:[],placedPiecesData:{},selectionScale:.25,pieceScale:.025,savedPiecesData:null},a.removeCurrentPiece=function(){var e=a.state.pieces.filter(function(e){return!e.selected});a.setState({pieces:e})},a.onUpdatePieces=function(e){var t=a.state.processedPieces;e.forEach(function(e){e.dirty&&(t[e.id]={pre:e})}),a.setState({pieces:e,processedPieces:t})},a.togglePiece=function(e){var t=a.state.placedPieces.slice(),n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),a.setState({placedPieces:t})},a.selectPiece=function(e){var t=a.state.pieces,n=[],c=null;t.forEach(function(t){t.id===e?(t.selected=!0,c=t):(t.selected=!1,n.push(t))}),n.push(c),a.setState({pieces:n})},a.onPieceReady=function(e,t){var n=a.state,c=n.processedPieces,i=n.pieces,r=Object.assign({},c);r[e].dataURL=t,i.forEach(function(t){t.id===e&&(t.dirty=!1)}),a.setState({processedPieces:r,pieces:i})},a.save=function(){var e=a.state,t={pieces:e.pieces,placedPieces:e.placedPieces,pieceScale:e.pieceScale,placedPiecesData:e.placedPiecesData,selectionScale:e.selectionScale};localStorage.setItem("collageMakerState",JSON.stringify(t))},a.load=function(){var e=localStorage.getItem("collageMakerState");if(e){var t=JSON.parse(e),n=t.pieces,c=t.placedPieces,i=t.pieceScale,r=t.placedPiecesData,s=t.selectionScale;n.forEach(function(e){e.dirty=!0}),a.onUpdatePieces(n),a.setState({placedPieces:c,pieceScale:i,selectionScale:s,placedPiecesData:r,savedPiecesData:r||{}})}},a.clear=function(){a.setState({pieces:[],processedPieces:{},placedPieces:[],placedPiecesData:{},savedPiecesData:{}})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.load(),document.body.addEventListener("keydown",function(t){if("s"===t.key){var a=document.querySelector("#selection .lower-canvas").toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=a,setTimeout(function(){var e=document.querySelector("#render .lower-canvas").toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=e,window.prompt("Copy to clipboard: Ctrl+C, Enter",localStorage.getItem("collageMakerState"))},1)}"Backspace"===t.key&&e.removeCurrentPiece()})}},{key:"componentDidUpdate",value:function(){this.save()}},{key:"render",value:function(){var e=this,t=this.state,a=t.src,n=t.pieces,i=t.processedPieces,r=t.placedPieces,s=t.pieceScale,o=t.selectionScale,l=t.savedPiecesData,d=t.placedPiecesData;return c.a.createElement("div",{className:"App",style:{background:"#e0e0e0",minHeight:"1000px"}},c.a.createElement(w.a,{position:"static",color:"inherit"},c.a.createElement(E.a,{variant:"dense"},c.a.createElement(P.a,{variant:"h6",color:"inherit"},"Wood Grain Collage Maker"))),c.a.createElement(h.a,{container:!0,spacing:24,style:{padding:"20px 100px"}},c.a.createElement(h.a,{item:!0,xs:3},c.a.createElement(h.a,{container:!0},c.a.createElement(v.a,{style:{width:"100%"}},c.a.createElement(m.a,null,c.a.createElement(L,{pieces:n,src:a,onUpdatePieces:this.onUpdatePieces,onUpdateSrc:function(t){return e.setState({src:t})},selectionScale:o,onScaleChange:function(t){return e.setState({selectionScale:t})},addPiece:function(t){return e.togglePiece(t)},placedPiecesData:d}))))),c.a.createElement(h.a,{item:!0,xs:2},c.a.createElement(h.a,{container:!0},c.a.createElement(v.a,{style:{width:"100%",minHeight:"200px"}},c.a.createElement(m.a,null,a&&c.a.createElement(N,{pieces:n,processedPieces:i,placedPieces:r,src:a,onPieceReady:this.onPieceReady,togglePiece:this.togglePiece,selectionScale:o}))),c.a.createElement("div",{style:{margin:"22px"}},c.a.createElement(O.a,{variant:"contained",onClick:this.clear},"Clear")))),c.a.createElement(h.a,{item:!0,xs:4},c.a.createElement(h.a,{container:!0},c.a.createElement(v.a,{style:{width:"100%"}},c.a.createElement(m.a,null,c.a.createElement(q,{pieces:n,processedPieces:i,src:a,placedPieces:r,savedPiecesData:l,onPiecePlacedUpdate:function(t){return e.setState({placedPiecesData:t})},onSelectPiece:this.selectPiece,scale:s,updatePieceScale:function(t){return e.setState({pieceScale:t})}})))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,a){e.exports=a(179)},74:function(e,t,a){},75:function(e,t,a){},80:function(e,t){},81:function(e,t){},82:function(e,t){},83:function(e,t){}},[[69,1,2]]]);
//# sourceMappingURL=main.a8de0abd.chunk.js.map